

/* Riduce la larghezza della sidebar */
:root {
  /* Larghezza sidebar ridotta da 18rem (default) a 14rem */
  --sl-sidebar-width: 14rem;
  /* Larghezza sidebar destra (TOC). Default ~18rem: la riduciamo per recuperare spazio. */
  --sl-toc-width: 12.5rem;
  /* Spazio verticale tra testo e footer per evitare che si attacchi al bordo */
  --sl-footer-gap: 1.5rem;
}

/* Su schermi medi (tablet e small laptop), riduce ulteriormente */
@media (min-width: 48rem) and (max-width: 72rem) {
  :root {
    --sl-sidebar-width: 12rem;
    --sl-toc-width: 13rem;
  }
}

@media (min-width: 90rem) {
  :root {
    /* Crescita progressiva su desktop grandi, con limiti ragionevoli */
    --sl-content-width: clamp(54rem, 60vw, 74rem);
  }
  /* Su schermi grandi, allinea il contenuto a sinistra del main-pane */
  [data-has-sidebar][data-has-toc] .main-pane {
    --sl-content-margin-inline: 0 auto;
  }
}
@media (min-width: 48rem) {
  /* Outer wrapper spans full viewport — no left/right offsets needed. Keep inner
     padding adjustments to ensure content aligns to the content column. */
  body {
    padding: 1rem 0.75rem;
  }
}

/* Sidebar background & text color: use theme background and text variables to avoid pure black */
.sidebar,
.sidebar-content,
.sl-sidebar,
.sl-sidebar-container,
.right-sidebar-panel {
  background-color: var(--sl-color-bg);
  color: var(--sl-color-text);
}

/* Riduce font-size dei link della sidebar se serve più compattezza */
.sidebar nav a {
  font-size: 0.9rem;
  padding: 0.25rem 0.75rem;
}

/* Riduce indentazione dei sottomenu */
.sidebar nav ul ul {
  padding-inline-start: 1rem;
}

/* Sidebar destra (TOC): compattiamo padding e tipografia */
.right-sidebar-panel {
  padding: 1rem 0.75rem;
}

.right-sidebar-panel a {
  font-size: 0.92rem;
  line-height: 1.35;
  padding-block: 0.2rem;
}

/* Spazio minore tra i livelli della TOC */
.right-sidebar-panel ul ul {
  margin-top: 0.25rem;
  padding-inline-start: 0.9rem;
}

/* Forza la larghezza del pannello TOC a destra solo su desktop */
@media (min-width: 72rem) {
  .right-sidebar-panel .sl-container {
    width: var(--sl-toc-width) !important;
    max-width: var(--sl-toc-width) !important;
  }
  /* Riduci anche il padding orizzontale del pannello TOC */
  .right-sidebar-panel {
    padding-inline: 0.75rem;
  }
  /* Stringi l'intera colonna destra e lascia che il main occupi lo spazio residuo */
  .right-sidebar-container {
    /* larghezza totale colonna destra (contenitore fisso + padding) */
    --_toc-col-width: calc(var(--sl-toc-width) + 2 * var(--sl-sidebar-pad-x));
    width: var(--_toc-col-width) !important;
    flex: 0 0 var(--_toc-col-width) !important;
  }
  [data-has-sidebar][data-has-toc] .main-pane {
    /* Evita lo spostamento a destra: centra i pannelli di contenuto */
    --sl-content-margin-inline: auto;
    width: auto !important;
    flex: 1 1 auto !important;
  }
}

/* Sticky footer layout: assicurati che il footer stia sempre in fondo
   alla finestra quando il contenuto è poco. Impostiamo body come
   un layout flex column e facciamo crescere il main per occupare
   lo spazio verticale disponibile. */
html,
body {
  height: 100%;
  min-width: 320px;
  overflow-x: auto;
}

body {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.page,
.main-frame,
.main-pane,
main,
.content-panel,
.content-panel > .sl-container {
  min-width: inherit;
}

/* Applicare lo stretching al contenuto principale: se il tema usa
   il tag <main> o elementi con role="main" li consideriamo qui */
main,
[role="main"] {
  flex: 1 0 auto;
}

/* Evita che il footer si ritiri quando lo spazio verticale è limitato */
footer {
  flex-shrink: 0;
}

/* Se la libreria del tema usa una struttura propria (es. .sl-root, .sl-wrapper)
   applicare un fallback per garantire altezza minima */
.sl-root,
.sl-wrapper,
.main-pane {
  min-height: 0; /* evita sorprese su wrapper con overflow */
}

/* Starlight-specific layout tweaks: make the main-frame and main column-fill */
.main-frame,
.main-pane {
  display: flex;
  flex-direction: column;
  flex: 1 0 auto;
  min-height: 0; /* important for flex children to shrink properly */
}
.main-frame {
  height: calc(100vh - var(--sl-nav-height));
  align-items: stretch;
  justify-content: flex-start;
}

/* Ensure <main> grows inside the frame, and the content panel becomes the stretch container
   with footer kept at the end */
main[data-pagefind-body],
main,
[role="main"] {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto; /* Ensure the main area can grow and shrink properly in the flex chain */
  min-height: 0;
}

/* Make sure the main element itself tries to fill the available viewport height
   minus header to prevent the last content panel from being not tall enough. */
main[data-pagefind-body],
main,
[role="main"] {
  min-height: calc(100vh - var(--sl-nav-height));
}

.content-panel {
  display: flex;
  flex-direction: column;
  min-height: 0; /* allow column to shrink correctly */
  flex: 0 1 auto; /* do not forcibly grow unless needed */
}

.content-panel > .sl-container {
  display: flex; /* make the container a column flex so footer can use margin-top:auto */
  flex-direction: column;
  flex: 1 1 auto; /* make the content grow, pushing footer to bottom */
  min-height: 0;
  gap: var(--sl-footer-gap); /* space between content and footer */
}

/* Force the page and main-frame to fill available viewport height, leaving
   space only for the fixed header and letting child sections stretch */
.page {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

.main-frame {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0; /* allow flex children to shrink/grow as required */
}

.main-pane {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0;
}

/* Make the last content-panel expand to fill available space so the footer
   (which is a child of that content-panel) is pushed to the bottom */
main > .content-panel:last-of-type {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0;
}
.page,
.main-frame,
.main-pane,
main,
.content-panel,
.content-panel > .sl-container {
  align-items: stretch;
  justify-content: flex-start;
}

/* Keep footer anchored inside the content-panel column */
/* Keep the footer visually anchored to the bottom of the content panel when the
   panel grows: `margin-top: auto` consumes the available vertical space above
   the footer (works only when the parent is a flex column). We keep any existing
   padding defined by the theme/component. */
main > .content-panel:last-of-type footer,
.content-panel > .sl-container > footer {
  margin-top: auto;
  position: relative;
  z-index: 2; /* Ensure the theme's footer is above custom footer */
}

/* Replicate anchoring behavior for custom footer */
/* Keep custom footer anchored inside the content-panel column (mirror of theme footer selector)
   Support both case where custom footer is compiled as `footer.custom-footer` and when it's a div with role contentinfo */
main > .content-panel:last-of-type footer.custom-footer,
main > .content-panel:last-of-type div[role="contentinfo"].custom-footer,
.content-panel > .sl-container > footer.custom-footer,
.content-panel > .sl-container > div[role="contentinfo"].custom-footer {
  margin-top: auto;
}

/* Increase specificity and force override in case the theme's Footer style
   (which is added after custom CSS) re-applies a margin-top: 4rem. */
/* NOTE: Removed the high specificity !important rule; Footer component now uses margin-top: auto so we rely on that. */

/* Final override: ensure footer is anchored to bottom even if theme re-applies 4rem margin later.
   Using a targeted selector and `!important` for fallback only; this keeps change localized. */
.page
  .main-frame
  .main-pane
  main[data-pagefind-body]
  > .content-panel:last-of-type
  > .sl-container
  > footer,
main[data-pagefind-body] > .content-panel:last-of-type > .sl-container > footer,
.page
  .main-frame
  .main-pane
  main
  > .content-panel:last-of-type
  > .sl-container
  > footer {
  margin-top: auto !important;
  align-self: stretch !important;
  width: 100% !important;
}

/* (Removed malformed duplicate selectors; explicit high-specificity block follows.) */
/* Sticky footer layout - fine della patch */