---
// Accessible accordion built on native <details/summary>
interface Props {
  title: string;
  defaultOpen?: boolean;
}

const { title, defaultOpen = false } = Astro.props;
---

<details class="accordion" {...defaultOpen ? { open: true } : {}}>
  <summary class="accordion__summary">
    <span class="accordion__title">{title}</span>
    <span class="accordion__icon" aria-hidden="true">â–¸</span>
  </summary>
  <div class="accordion__content">
    <slot />
  </div>
</details>

<style>
  .accordion {
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 8px;
    background: var(--sl-color-bg);
    padding: 0.25rem 0.75rem;
    margin: 1rem 0;
  }

  .accordion[open] {
    padding-bottom: 0.75rem;
  }

  .accordion__summary {
    list-style: none;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    padding: 0.5rem 0;
  }

  .accordion__summary::-webkit-details-marker {
    display: none;
  }

  .accordion__title {
    font-weight: 600;
  }

  .accordion__icon {
    margin-left: auto;
    transition: transform 0.2s ease;
  }

  .accordion[open] .accordion__icon {
    transform: rotate(90deg);
  }

  .accordion__content {
    margin-top: 0.5rem;
  }
</style>
